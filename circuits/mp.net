*MOLTIPLICATORE PARALLELO

.option filetype=ascii

***CARICAMENTO LIBRERIE***
.INCLUDE ST65LIKE_cell_library_v2020_1.net
.INCLUDE 16nm_HP.pm

**************************
***DEFINIZIONE DEI PARAMETRI GLOBALI***
.PARAM Lmin=51.71336n
.PARAM Wmin=36.05883n
.PARAM XXX=1
.PARAM tr=50p

**************************
***DEFINIZIONE DEI SOTTOCIRCUITI***
.subckt PART_SUB 0 Vdd out0 out1 out2 out3 x0in x1in x2in x3in y XX=1
	xand0 0 Vdd out0 x0in y AND2_SUB XX=XXX
	xand1 0 Vdd out1 x1in y AND2_SUB XX=XXX
	xand2 0 Vdd out2 x2in y AND2_SUB XX=XXX
	xand3 0 Vdd out3 x3in y AND2_SUB XX=XXX
.ends

.subckt RCA_SUB 0 Vdd sum0 sum1 sum2 sum3 cout3 cin0 a0in a1in a2in a3in b0in b1in b2in b3in XX=1 
	xfa0 0 Vdd sum0 cout0 0 a0in b0in FA_SUB XX=XXX
	xfa1 0 Vdd sum1 cout1 cout0 a1in b1in FA_SUB XX=XXX
	xfa2 0 Vdd sum2 cout2 cout1 a2in b2in FA_SUB XX=XXX
	xfa3 0 Vdd sum3 cout3 cout2 a3in b3in FA_SUB XX=XXX
.ends 

***numeroOut= uscita schiera di porte and
***snumero znumero= uscita sommatori
.subckt MP_SUB 0 Vdd z0 z1 z2 z3 z4 z5 z6 z7 c0 0xin 1xin 2xin  3xin 0yin 1yin 2yin 3yin XX=1
	xpart0 0 Vdd z0    0out1 0out2 0out3 0xin 1xin 2xin  3xin  0yin PART_SUB XX=XXX
	xpart1 0 Vdd 1out0 1out1 1out2 1out3 0xin 1xin 2xin  3xin  1yin PART_SUB XX=XXX
	xadd0  0 Vdd z1    s1    s2    s3    c3   c0   0out1 0out2 0out3 0 1out0 1out1 1out2 1out3 RCA_SUB XX=XXX
	xpart3 0 Vdd 2out0 2out1 2out2 2out3 0xin 1xin 2xin  3xin  2yin PART_SUB XX=XXX
	xadd1  0 Vdd z2    s4    s5    s6    c6   c0   s1    s2    s3   c3 2out0 2out1 2out2 2out3 RCA_SUB XX=XXX
	xpart4 0 Vdd 3out0 3out1 3out2 3out3 0xin 1xin 2xin  3xin  3yin PART_SUB XX=XXX
	xadd2  0 Vdd z3    z4    z5    z6    z7   c0   s4    s5    s6   c6 3out0 3out1 3out2 3out3 RCA_SUB XX=XXX
.ends

**************************
***DICHIARAZIONE DEL COMPONENTI***
xmp 0 Vcc zz0 zz1 zz2 zz3 zz4 zz5 zz6 zz7 cc0 x0 x1 x2 x3 y0 y1 y2 y3 MP_SUB XX=XXX

**************************
***COMANDI DI SIMULAZIONE***
.PRINT tran V(A0) V(B0) V(A1) V(B1) V(S0) V(S1) V(S2) V(S3)
.TRAN 0.1p 500p

**************************
V0 x0 0 PWL(0 0 820p 0) ; A0 = 0
*V0 x0 0 PWL(0 0 5p 0 6p 1 820p 1); A0 = 1

V1 x1 0 PWL(0 0 820p 0); A1 = 0
*V1 x1 0 PWL(0 0 5p 0 6p 1 820p 1); A1 = 1

V2 y0 0 PWL(0 0 820p 0); B0 = 0
*V2 y0 0 PWL(0 0 5p 0 6p 1 820p 1); B0 = 1

V3 y1 0 PWL(0 0 820p 0); B1 = 0
*V3 y1 0 PWL(0 0 5p 0 6p 1 820p 1); B1 = 1

V4 x2 0 PWL(0 0 820p 0) ; A2 = 0
*V4 x2 0 PWL(0 0 5p 0 6p 1 820p 1); A2 = 1

*V5 x3 0 PWL(0 0 820p 0); A3 = 0
V5 x3 0 PWL(0 0 5p 0 6p 1 820p 1); A3 = 1

V6 y2 0 PWL(0 0 820p 0); B2 = 0
*V6 y2 0 PWL(0 0 5p 0 6p 1 820p 1); B2 = 1

*V7 y3 0 PWL(0 0 820p 0); B3 = 0
V7 y3 0 PWL(0 0 5p 0 6p 1 820p 1); B3 = 1

V_dd Vcc 0 1
.end
